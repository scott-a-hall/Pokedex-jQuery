var pokemonRepository = (function() {
  var t = [],
    n = 'https://pokeapi.co/api/v2/pokemon/';
  function e(n) {
    t.push(n);
  }
  function o(t) {
    var n = t.detailsUrl;
    return $.ajax(n, { dataType: 'json' })
      .then(function(t) {
        return t;
      })
      .then(function(n) {
        (t.imageUrl = n.sprites.front_default),
          (t.height = n.height),
          (t.types = []);
        for (var e = 0; e < n.types.length; e++)
          t.types.push(' ' + n.types[e].type.name);
      })
      .catch(function(t) {
        console.error(t);
      });
  }
  function a(t) {
    var n = $('.modal-body'),
      e = $('.modal-title');
    n.empty(), e.empty();
    var o = $('<h1>' + t.name + '</h1>'),
      a = $('<p>Height: ' + t.height + ' m</p>'),
      p = $('<p>Type: ' + t.types + '</p>'),
      i = $('<img src =' + t.imageUrl + '>');
    e.append(o), n.append(a), n.append(p), n.append(i);
  }
  return {
    add: e,
    getAll: function() {
      return t;
    },
    addListItem: function(t) {
      var n = $('#pokemon-list'),
        e = $('<li></li>'),
        p = $(
          '<button type="btn" class="btn btn-primary" data-toggle="modal" data-target="#pokeModal">' +
            t.name +
            '</button>'
        );
      e.append(p),
        n.append(e),
        p.on('click', function() {
          var n;
          o((n = t)).then(function() {
            a(n);
          });
        });
    },
    loadList: function() {
      return $.ajax(n, { dataType: 'json' })
        .then(function(t) {
          return t;
        })
        .then(function(t) {
          t.results.forEach(function(t) {
            e({ name: t.name, detailsUrl: t.url });
          });
        })
        .catch(function(t) {
          console.error(t);
        });
    },
    loadDetails: o,
    showModal: a
  };
})();
pokemonRepository.loadList().then(function() {
  pokemonRepository.getAll().forEach(function(t) {
    pokemonRepository.addListItem(t);
  });
});
